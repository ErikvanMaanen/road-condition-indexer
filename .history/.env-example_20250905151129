###################################################################################################
# ROAD CONDITION INDEXER - STRUCTURED ENVIRONMENT CONFIGURATION                                    #
###################################################################################################
# Format Specification (machine & human friendly):                                                  #
#   [SECTION <Name>]                                 Start a logical configuration section          #
#   META <Key>=<Value>                               Additional metadata for the section            #
#   VAR  <Name>=<Value> [# comment]                 Plain variable (local default)                  #
#   SECRET <Name>=<Value>                            Marks variable as secret locally               #
#   REQUIRE <Name> (secret|public)                   Declares variable required in all environments  #
#   NOTE <free text>                                 Documentation line                             #
# Blank lines and lines starting with # (not matched above) are ignored.                           #
# The validator script parses this structure to build a configuration model.                       #
###################################################################################################

[SECTION Database]
META Type=AzureSQL
META Purpose=Primary application data store
SECRET AZURE_SQL_PASSWORD=@tX1Ue5F2pQMWSha
VAR    AZURE_SQL_SERVER=erikmaa.database.windows.net
VAR    AZURE_SQL_DATABASE=rci-nl-database
VAR    AZURE_SQL_USER=techno
VAR    AZURE_SQL_PORT=1433
REQUIRE AZURE_SQL_PASSWORD secret
REQUIRE AZURE_SQL_SERVER public
REQUIRE AZURE_SQL_DATABASE public
REQUIRE AZURE_SQL_USER public
REQUIRE AZURE_SQL_PORT public

[SECTION AzureWebApp]
META SubscriptionName=raet experimental
META AppName=rci-nl
META ResourceGroup=ErikMaa
META Location=West Europe
META Url=https://rci-nl.azurewebsites.net
META Kind=Linux Web App
META HttpsOnly=true
META AppServicePlan=erikmaa
META State=Running
NOTE Variables required in Azure = union of REQUIRE declarations across sections.

[SECTION GitHub]
META Repository=https://github.com/ErikvanMaanen/road-condition-indexer.git
META Owner=ErikvanMaanen
NOTE Secrets must be added as Codespaces or repository secrets. Public vars as repository variables.
REQUIRE AZURE_SQL_PASSWORD secret
REQUIRE AZURE_SQL_SERVER public
REQUIRE AZURE_SQL_DATABASE public
REQUIRE AZURE_SQL_USER public
REQUIRE AZURE_SQL_PORT public
REQUIRE RCI_MAX_INTERVAL_SEC public
REQUIRE RCI_MAX_DISTANCE_M public
REQUIRE RCI_MIN_SPEED_KMH public

[SECTION Application]
META Purpose=Domain specific thresholds
VAR  RCI_MAX_INTERVAL_SEC=15      # Maximum time between data points (seconds)
VAR  RCI_MAX_DISTANCE_M=100       # Maximum distance between data points (meters)
VAR  RCI_MIN_SPEED_KMH=7          # Minimum speed for data recording (km/h)
REQUIRE RCI_MAX_INTERVAL_SEC public
REQUIRE RCI_MAX_DISTANCE_M public
REQUIRE RCI_MIN_SPEED_KMH public

[SECTION Notes]
NOTE Environment Detection:
NOTE - Local: No WEBSITE_SITE_NAME or CODESPACES environment variables
NOTE - Azure Web App: WEBSITE_SITE_NAME present
NOTE - GitHub Codespaces: CODESPACES present
NOTE Application loads from .env locally, environment vars in cloud.
