<!-- Activity Log and Debug Messages Partial -->
<style>
    #logs {
        border: 1px solid #ccc;
        padding: 0.5rem;
        background: #f9f9f9;
    }
    #log {
        width: 100%;
        height: 150px;
        overflow: auto;
        border: 1px solid #ccc;
        margin-bottom: 1rem;
        white-space: pre;
        padding: 0.5rem;
        background: white;
        font-family: monospace;
        font-size: 0.9rem;
    }
    #debug {
        width: 100%;
        height: 150px;
        margin-top: 1rem;
        font-family: monospace;
        font-size: 0.9rem;
        resize: vertical;
    }
    #toggle-logs {
        padding: 0.5rem 1rem;
        background: #007cba;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    #toggle-logs:hover {
        background: #005a8b;
    }
</style>

<section id="logs" style="margin-bottom:1rem; display:none;">
    <h3>Activity Log</h3>
    <div id="log"></div>
    <h3>Debug Messages</h3>
    <textarea id="debug" readonly></textarea>
</section>
<div style="margin-bottom:1rem;">
    <button id="toggle-logs" onclick="toggleLogs()">Show Logs</button>
</div>

<script>
// Activity Log and Debug Messages JavaScript Functions
function addLog(msg) {
    const div = document.getElementById('log');
    if (div) {
        const cesTime = new Date().toLocaleString('sv-SE', { timeZone: 'Europe/Amsterdam' });
        div.textContent += cesTime + ' - ' + msg + '\n';
        div.scrollTop = div.scrollHeight;
    }
}

function addDebug(msg) {
    const el = document.getElementById('debug');
    if (el) {
        const cesTime = new Date().toLocaleString('sv-SE', { timeZone: 'Europe/Amsterdam' });
        el.value += cesTime + ' - ' + msg + '\n';
        el.scrollTop = el.scrollHeight;
    }
}

function toggleLogs() {
    const logsSection = document.getElementById('logs');
    const toggleButton = document.getElementById('toggle-logs');
    
    if (logsSection && toggleButton) {
        if (logsSection.style.display === 'none') {
            logsSection.style.display = 'block';
            toggleButton.textContent = 'Hide Logs';
        } else {
            logsSection.style.display = 'none';
            toggleButton.textContent = 'Show Logs';
        }
    }
}

// Ensure logs are properly initialized when partial is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize logs if they exist
    const logsSection = document.getElementById('logs');
    if (logsSection) {
        logsSection.style.display = 'none';
    }
});
</script>
